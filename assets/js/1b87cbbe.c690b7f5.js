"use strict";(self.webpackChunkbacalhau_docs=self.webpackChunkbacalhau_docs||[]).push([[5667],{2837:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var a=t(5893),o=t(1151);const i={sidebar_label:"Python File",sidebar_position:12,description:"How to run a Python file hosted on Bacalhau"},r="Running a Python Script",l={id:"examples/workload-onboarding/trivial-python/index",title:"Running a Python Script",description:"How to run a Python file hosted on Bacalhau",source:"@site/docs/examples/workload-onboarding/trivial-python/index.md",sourceDirName:"examples/workload-onboarding/trivial-python",slug:"/examples/workload-onboarding/trivial-python/",permalink:"/examples/workload-onboarding/trivial-python/",draft:!1,unlisted:!1,editUrl:"https://github.com/bacalhau-project/docs.bacalhau.org/blob/main/docs/examples/workload-onboarding/trivial-python/index.md",tags:[],version:"current",lastUpdatedAt:1702302289,formattedLastUpdatedAt:"Dec 11, 2023",sidebarPosition:12,frontMatter:{sidebar_label:"Python File",sidebar_position:12,description:"How to run a Python file hosted on Bacalhau"},sidebar:"documentationSidebar",previous:{title:"CUDA",permalink:"/examples/workload-onboarding/CUDA/"},next:{title:"Scripting Bacalhau with Python",permalink:"/examples/workload-onboarding/python-script/"}},s={},d=[{value:"TD;LR",id:"tdlr",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Creating a Hello World File",id:"creating-a-hello-world-file",level:2},{value:"Submit the workload",id:"submit-the-workload",level:2},{value:"Checking the State of your Jobs",id:"checking-the-state-of-your-jobs",level:2},{value:"Viewing your Job Output",id:"viewing-your-job-output",level:2},{value:"Need Support?",id:"need-support",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"running-a-python-script",children:"Running a Python Script"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/bacalhau-project/bacalhau",children:(0,a.jsx)(n.img,{src:"https://img.shields.io/github/stars/bacalhau-project/bacalhau?style=social",alt:"stars - badge-generator"})})}),"\n",(0,a.jsx)(n.p,{children:"This example tutorial serves as an introduction to Bacalhau. Here, you'll be running a Python file hosted on a website on Bacalhau."}),"\n",(0,a.jsx)(n.h2,{id:"tdlr",children:"TD;LR"}),"\n",(0,a.jsx)(n.p,{children:"A quick guide on how to run a hello world script on Bacalhau"}),"\n",(0,a.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(n.p,{children:["To get started, you need to install the Bacalhau client, see more information ",(0,a.jsx)(n.a,{href:"https://docs.bacalhau.org/getting-started/installation",children:"here"})]}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-hello-world-file",children:"Creating a Hello World File"}),"\n",(0,a.jsxs)(n.p,{children:["We'll be using a very simple Python script that displays the ",(0,a.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/%22Hello,_World!%22_program",children:"traditional first greeting"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"%cat hello-world.py\n"})}),"\n",(0,a.jsx)(n.h2,{id:"submit-the-workload",children:"Submit the workload"}),"\n",(0,a.jsxs)(n.p,{children:["To submit a workload to Bacalhau you can use the ",(0,a.jsx)(n.code,{children:"bacalhau docker run"})," command."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"%%bash --out job_id\nbacalhau docker run \\\n  --id-only \\\n  --input https://raw.githubusercontent.com/bacalhau-project/examples/151eebe895151edd83468e3d8b546612bf96cd05/workload-onboarding/trivial-python/hello-world.py \\\n  python:3.10-slim -- python3 /inputs/hello-world.py\n"})}),"\n",(0,a.jsxs)(n.p,{children:["When a job is submitted, Bacalhau prints out the related ",(0,a.jsx)(n.code,{children:"job_id"}),". We store that in an environment variable so that we can reuse it later on."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"%env JOB_ID={job_id}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"bacalhau docker run"})," command allows passing input data into the container using ",(0,a.jsx)(n.a,{href:"https://github.com/multiformats/cid",children:"content identifier (CID)"})," volumes, we will be using the ",(0,a.jsx)(n.code,{children:"-i URL:path"})," ",(0,a.jsx)(n.a,{href:"https://docs.bacalhau.org/all-flags#docker-run",children:"argument"})," for simplicity. This results in Bacalhau mounting a ",(0,a.jsx)(n.em,{children:"data volume"})," inside the container. By default, Bacalhau mounts the input volume at the path ",(0,a.jsx)(n.code,{children:"/inputs"})," inside the container."]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://github.com/filecoin-project/bacalhau/blob/v0.2.3/cmd/bacalhau/docker_run.go#L64",children:"Bacalhau overwrites the default entrypoint"}),", so we must run the full command after the ",(0,a.jsx)(n.code,{children:"--"})," argument."]})}),"\n",(0,a.jsx)(n.h2,{id:"checking-the-state-of-your-jobs",children:"Checking the State of your Jobs"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Job status"}),": You can check the status of the job using ",(0,a.jsx)(n.code,{children:"bacalhau list"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"%%bash\nbacalhau list --id-filter=${JOB_ID} --no-style\n"})}),"\n",(0,a.jsxs)(n.p,{children:["When it says ",(0,a.jsx)(n.code,{children:"Published"})," or ",(0,a.jsx)(n.code,{children:"Completed"}),", that means the job is done, and we can get the results."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Job information"}),": You can find out more information about your job by using ",(0,a.jsx)(n.code,{children:"bacalhau describe"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"%%bash\nbacalhau describe ${JOB_ID}\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Job download"}),": You can download your job results directly by using ",(0,a.jsx)(n.code,{children:"bacalhau get"}),". Alternatively, you can choose to create a directory to store your results. In the command below, we created a directory and downloaded our job output to be stored in that directory."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"%%bash\nrm -rf results && mkdir results\nbacalhau get ${JOB_ID} --output-dir results\n"})}),"\n",(0,a.jsx)(n.h2,{id:"viewing-your-job-output",children:"Viewing your Job Output"}),"\n",(0,a.jsx)(n.p,{children:"To view the file, run the following command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"\n%%bash\ncat results/stdout\n\n"})}),"\n",(0,a.jsx)(n.h2,{id:"need-support",children:"Need Support?"}),"\n",(0,a.jsxs)(n.p,{children:["For questions, and feedback, please reach out to our ",(0,a.jsx)(n.a,{href:"https://github.com/filecoin-project/bacalhau/discussions",children:"forum"})]})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>r});var a=t(7294);const o={},i=a.createContext(o);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);