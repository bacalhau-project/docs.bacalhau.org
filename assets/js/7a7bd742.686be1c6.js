"use strict";(self.webpackChunkbacalhau_docs=self.webpackChunkbacalhau_docs||[]).push([[6776],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var r=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=r.createContext({}),s=function(e){var t=r.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,o=e.mdxType,n=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(a),d=o,h=u["".concat(c,".").concat(d)]||u[d]||f[d]||n;return a?r.createElement(h,i(i({ref:t},p),{},{components:a})):r.createElement(h,i({ref:t},p))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=a.length,i=new Array(n);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[u]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<n;s++)i[s]=a[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},6942:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>f,frontMatter:()=>n,metadata:()=>l,toc:()=>s});var r=a(7462),o=(a(7294),a(3905));const n={sidebar_label:"Local"},i="Local Source Specification",l={unversionedId:"references/other-specifications/sources/local",id:"references/other-specifications/sources/local",title:"Local Source Specification",description:"The Local input source allows Bacalhau jobs to access files and directories that are already present on the compute node. This is especially useful for utilizing locally stored datasets, configuration files, logs, or other necessary resources without the need to fetch them from a remote source, ensuring faster job initialization and execution.",source:"@site/docs/references/other-specifications/sources/local.md",sourceDirName:"references/other-specifications/sources",slug:"/references/other-specifications/sources/local",permalink:"/references/other-specifications/sources/local",draft:!1,editUrl:"https://github.com/bacalhau-project/docs.bacalhau.org/blob/main/docs/references/other-specifications/sources/local.md",tags:[],version:"current",lastUpdatedAt:1697636387,formattedLastUpdatedAt:"Oct 18, 2023",frontMatter:{sidebar_label:"Local"},sidebar:"documentationSidebar",previous:{title:"IPFS",permalink:"/references/other-specifications/sources/ipfs"},next:{title:"S3",permalink:"/references/other-specifications/sources/s3"}},c={},s=[{value:"Source Specification Parameters",id:"source-specification-parameters",level:2},{value:"Allow-listing Local Paths",id:"allow-listing-local-paths",level:3},{value:"Example",id:"example",level:3},{value:"Example (Imperative/CLI)",id:"example-imperativecli",level:3}],p={toc:s},u="wrapper";function f(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"local-source-specification"},"Local Source Specification"),(0,o.kt)("p",null,"The Local input source allows Bacalhau jobs to access files and directories that are already present on the compute node. This is especially useful for utilizing locally stored datasets, configuration files, logs, or other necessary resources without the need to fetch them from a remote source, ensuring faster job initialization and execution."),(0,o.kt)("h2",{id:"source-specification-parameters"},"Source Specification Parameters"),(0,o.kt)("p",null,"Here are the parameters that you can define for a Local input source:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"SourcePath")," ",(0,o.kt)("inlineCode",{parentName:"p"},"(string: <required>)"),": The absolute path on the compute node where the Local or file is located. Bacalhau will access this path to read data, and if permitted, write data as well.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"ReadWrite")," ",(0,o.kt)("inlineCode",{parentName:"p"},"(bool: false)"),": A boolean flag that, when set to true, gives Bacalhau both read and write access to the specified Local or file. If set to false, Bacalhau will have read-only access."))),(0,o.kt)("h3",{id:"allow-listing-local-paths"},"Allow-listing Local Paths"),(0,o.kt)("p",null,"For security reasons, direct access to local paths must be explicitly allowed when running the Bacalhau compute node. This is achieved using the ",(0,o.kt)("inlineCode",{parentName:"p"},"--allow-listed-local-paths")," flag followed by a comma-separated list of the paths, or path patterns, that should be accessible. Each path can be suffixed with permissions as well:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},":rw")," - Read-Write access."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},":ro")," - Read-Only access (default if no suffix is provided).")),(0,o.kt)("p",null,"For instance:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'bacalhau serve --allow-listed-local-paths "/etc/config:rw,/etc/*.conf:ro"\n')),(0,o.kt)("h3",{id:"example"},"Example"),(0,o.kt)("p",null,"Below is an example of how to define a Local input source in YAML format."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'InputSources:\n  - Source:\n      Type: "localDirectory"\n      Params:\n        SourcePath: "/etc/config"\n        ReadWrite: true\n    Target: "/config"\n')),(0,o.kt)("p",null,'In this example, Bacalhau is configured to access the Local "/etc/config" on the compute node. The contents of this directory are made available at the "/config" path within the task\'s environment, with read and write access. Adjusting the ',(0,o.kt)("inlineCode",{parentName:"p"},"ReadWrite")," flag to false would enable read-only access, preventing modifications to the local data from within the Bacalhau task."),(0,o.kt)("h3",{id:"example-imperativecli"},"Example (Imperative/CLI)"),(0,o.kt)("p",null,"When using the Bacalhau CLI to define the local input source, you can employ the following imperative approach. Below are example commands demonstrating how to define the local input source with various configurations:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Mount readonly file to ",(0,o.kt)("inlineCode",{parentName:"strong"},"/config")),":"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bacalhau docker run -i file:///etc/config:/config ubuntu ...\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Mount writable file to default ",(0,o.kt)("inlineCode",{parentName:"strong"},"/input")),":"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bacalhau docker run -i file:///var/checkpoints:/myCheckpoints,opt=rw=true ubuntu ...\n")))))}f.isMDXComponent=!0}}]);