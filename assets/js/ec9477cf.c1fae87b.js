"use strict";(self.webpackChunkbacalhau_docs=self.webpackChunkbacalhau_docs||[]).push([[5678],{4104:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>t,toc:()=>l});var r=s(5893),c=s(1151);const i={sidebar_label:"auto-resources"},o="Command: config auto-resources",t={id:"references/cli/config/auto-resources",title:"Command: config auto-resources",description:"Description:",source:"@site/docs/references/cli/config/auto-resources.md",sourceDirName:"references/cli/config",slug:"/references/cli/config/auto-resources",permalink:"/references/cli/config/auto-resources",draft:!1,unlisted:!1,editUrl:"https://github.com/bacalhau-project/docs.bacalhau.org/blob/main/docs/references/cli/config/auto-resources.md",tags:[],version:"current",lastUpdatedAt:1702302289,formattedLastUpdatedAt:"Dec 11, 2023",frontMatter:{sidebar_label:"auto-resources"},sidebar:"documentationSidebar",previous:{title:"command: config",permalink:"/references/cli/config/"},next:{title:"default",permalink:"/references/cli/config/default"}},a={},l=[{value:"Description:",id:"description",level:2},{value:"Usage",id:"usage",level:2},{value:"Flags",id:"flags",level:2},{value:"Examples",id:"examples",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"command-config-auto-resources",children:["Command: ",(0,r.jsx)(n.code,{children:"config auto-resources"})]}),"\n",(0,r.jsx)(n.h2,{id:"description",children:"Description:"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"bacalhau config auto-resources"})," command automatically configures compute resource values in the bacalhau node's configuration file based on the hardware resources of the user's machine. This command streamlines the process of resource allocation for jobs, dynamically adjusting settings to align with the capabilities of the machine. It is designed to simplify the task of resource management, ensuring that the node operates efficiently and effectively within the hardware's limits."]}),"\n",(0,r.jsxs)(n.p,{children:["Note: The ",(0,r.jsx)(n.code,{children:"bacalhau config auto-resources"})," command intelligently adjusts resource allocation settings based on the specific hardware configuration of your machine, promoting optimal utilization for bacalhau jobs. Due to the dynamic nature of this command, the specific values set in the configuration will vary depending on the available hardware resources of the machine in use. This functionality is particularly beneficial for users who seek to optimize their node's performance without the need for manual calculations of resource limits. It is important for users to understand that these settings will directly impact the number and types of jobs their node can manage at any given time, based on the machine's resource capacity."]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bacalhau config auto-resources [flags]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"flags",children:"Flags"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--default-job-percentage int"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Description: Sets the default percentage of resources allocated for each job when specific limits are not defined. Acceptable values range from 1 to 100 (values over 100 are rejected)."}),"\n",(0,r.jsx)(n.li,{children:"Default: 75"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--job-percentage int"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Description: Determines the percentage of resources that can be utilized at one time for a single job. Accept values from 1 to 100 (values over 100 are rejected)."}),"\n",(0,r.jsx)(n.li,{children:"Default: 75"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--queue-job-percentage int"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Description: Specifies the total percentage of resources that the system can allocate for all jobs queued at one time. Accept values from 1 to 100 (values over 100 are accepted)."}),"\n",(0,r.jsx)(n.li,{children:"Default: 150"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--total-percentage int"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Description: Indicates the total percentage of resources that the system can utilize at one time across all jobs. Accept values from 1 to 100 (values over 100 are rejected)."}),"\n",(0,r.jsx)(n.li,{children:"Default: 75"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.p,{children:"(Ran on an Apple M1 Max with 10 Cores and 64GB RAM)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Basic Usage"}),":"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ bacalhau config auto-resources\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Config File"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'node:\n    compute:\n        capacity:\n            defaultjobresourcelimits:\n                cpu: 7500m\n                disk: 568 GB\n                gpu: "0"\n                memory: 52 GB\n            jobresourcelimits:\n                cpu: 7500m\n                disk: 568 GB\n                gpu: "0"\n                memory: 52 GB\n            queueresourcelimits:\n                cpu: 15000m\n                disk: 1.1 TB\n                gpu: "0"\n                memory: 103 GB\n            totalresourcelimits:\n                cpu: 7500m\n                disk: 568 GB\n                gpu: "0"\n                memory: 52 GB\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Queue 500% system resources"}),":"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ bacalhau config auto-resources --queue-job-percentage=500\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Config File"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'node:\n    compute:\n        capacity:\n            defaultjobresourcelimits:\n                cpu: 7500m\n                disk: 568 GB\n                gpu: "0"\n                memory: 52 GB\n            jobresourcelimits:\n                cpu: 7500m\n                disk: 568 GB\n                gpu: "0"\n                memory: 52 GB\n            queueresourcelimits:\n                cpu: 50000m\n                disk: 3.8 TB\n                gpu: "0"\n                memory: 344 GB\n            totalresourcelimits:\n                cpu: 7500m\n                disk: 568 GB\n                gpu: "0"\n                memory: 52 GB\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"With 25% of system resources"}),":"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ bacalhau config auto-resources  --total-percentage=25 --job-percentage=25 --default-job-percentage=25\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Config File"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'node:\n    compute:\n        capacity:\n            defaultjobresourcelimits:\n                cpu: 2500m\n                disk: 190 GB\n                gpu: "0"\n                memory: 17 GB\n            jobresourcelimits:\n                cpu: 2500m\n                disk: 190 GB\n                gpu: "0"\n                memory: 17 GB\n            queueresourcelimits:\n                cpu: 15000m\n                disk: 1.1 TB\n                gpu: "0"\n                memory: 103 GB\n            totalresourcelimits:\n                cpu: 2500m\n                disk: 190 GB\n                gpu: "0"\n                memory: 17 GB\n'})}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>t,a:()=>o});var r=s(7294);const c={},i=r.createContext(c);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);