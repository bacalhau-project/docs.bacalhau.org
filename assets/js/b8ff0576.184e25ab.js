"use strict";(self.webpackChunkbacalhau_docs=self.webpackChunkbacalhau_docs||[]).push([[3710],{6744:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>l});var o=i(5893),n=i(1151);const s={sidebar_label:"Timeouts",sidebar_position:155},r="Job execution timeouts",d={id:"running-node/timeouts",title:"Job execution timeouts",description:"Bacalhau can limit the total time a job spends executing. A job that spends too",source:"@site/docs/running-node/timeouts.md",sourceDirName:"running-node",slug:"/running-node/timeouts",permalink:"/running-node/timeouts",draft:!1,unlisted:!1,editUrl:"https://github.com/bacalhau-project/docs.bacalhau.org/blob/main/docs/running-node/timeouts.md",tags:[],version:"current",lastUpdatedAt:1702044882,formattedLastUpdatedAt:"Dec 8, 2023",sidebarPosition:155,frontMatter:{sidebar_label:"Timeouts",sidebar_position:155},sidebar:"documentationSidebar",previous:{title:"Resource Limits",permalink:"/running-node/resource-limits"},next:{title:"Test Network Locally",permalink:"/running-node/test-network"}},a={},l=[{value:"Configuring execution time limits for a job",id:"configuring-execution-time-limits-for-a-job",level:2},{value:"Configuring execution time limits for a node",id:"configuring-execution-time-limits-for-a-node",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"job-execution-timeouts",children:"Job execution timeouts"}),"\n",(0,o.jsx)(t.p,{children:"Bacalhau can limit the total time a job spends executing. A job that spends too\nlong executing will be cancelled and no results will be published."}),"\n",(0,o.jsx)(t.p,{children:"By default, a Bacalhau node does not enforce any limit on job execution time.\nBoth node operators and job submitters can supply a maximum execution time\nlimit. If a job submitter asks for a longer execution time than permitted by a\nnode operator, their job will be rejected."}),"\n",(0,o.jsx)(t.p,{children:"Applying job timeouts allows node operators to more fairly distribute the work\nsubmitted to their nodes. It also protects users from transient errors that\nresults in their jobs waiting indefinitely."}),"\n",(0,o.jsx)(t.h2,{id:"configuring-execution-time-limits-for-a-job",children:"Configuring execution time limits for a job"}),"\n",(0,o.jsxs)(t.p,{children:["Job submitters can pass the ",(0,o.jsx)(t.code,{children:"--timeout"})," flag to any Bacalhau job submission CLI\nto set a maximum job execution time. The supplied value should be a whole number\nof seconds with no unit."]}),"\n",(0,o.jsxs)(t.p,{children:["The timeout can also be added to an existing job spec by adding the ",(0,o.jsx)(t.code,{children:"Timeout"}),"\nproperty to the ",(0,o.jsx)(t.code,{children:"Spec"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"configuring-execution-time-limits-for-a-node",children:"Configuring execution time limits for a node"}),"\n",(0,o.jsxs)(t.p,{children:["Node operators can pass the ",(0,o.jsx)(t.code,{children:"--max-job-execution-timeout"})," flag to ",(0,o.jsx)(t.code,{children:"bacalhau serve"})," to\nconfigure the maximum job time limit. The supplied value should be a numeric\nvalue followed by a time unit (one of ",(0,o.jsx)(t.code,{children:"s"})," for seconds, ",(0,o.jsx)(t.code,{children:"m"})," for minutes or ",(0,o.jsx)(t.code,{children:"h"}),"\nfor hours)."]}),"\n",(0,o.jsx)(t.p,{children:"Node operators can also use configuration properties to configure execution\nlimits."}),"\n",(0,o.jsx)(t.p,{children:"Compute nodes will use the properties:"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Config property"}),(0,o.jsx)(t.th,{children:"Meaning"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"Node.Compute.JobTimeouts.MinJobExecutionTimeout"})}),(0,o.jsx)(t.td,{children:"The minimum acceptable value for a job timeout. A job will only be accepted if it is submitted with a timeout of longer than this value."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"Node.Compute.JobTimeouts.MaxJobExecutionTimeout"})}),(0,o.jsx)(t.td,{children:"The maximum acceptable value for a job timeout. A job will only be accepted if it is submitted with a timeout of shorter than this value."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"Node.Compute.JobTimeouts.DefaultJobExecutionTimeout"})}),(0,o.jsx)(t.td,{children:"The job timeout that will be applied to jobs that are submitted without a timeout value."})]})]})]}),"\n",(0,o.jsx)(t.p,{children:"Requester nodes will use the properties:"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Config property"}),(0,o.jsx)(t.th,{children:"Meaning"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"Node.Requester.Timeouts.MinJobExecutionTimeout"})}),(0,o.jsx)(t.td,{children:"If a job is submitted with a timeout less than this value, the default job execution timeout will be used instead."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"Node.Requester.Timeouts.DefaultJobExecutionTimeout"})}),(0,o.jsx)(t.td,{children:"The timeout to use in the job if a timeout is missing or too small."})]})]})]})]})}function u(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},1151:(e,t,i)=>{i.d(t,{Z:()=>d,a:()=>r});var o=i(7294);const n={},s=o.createContext(n);function r(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);