"use strict";(self.webpackChunkbacalhau_docs=self.webpackChunkbacalhau_docs||[]).push([[7196],{486:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var t=s(5893),i=s(1151);const r={sidebar_label:"Wasm"},a="WebAssembly (WASM) Engine Specification",o={id:"references/other-specifications/engines/wasm",title:"WebAssembly (WASM) Engine Specification",description:"The WASM Engine in Bacalhau allows tasks to be executed in a WebAssembly environment, offering compatibility and speed. This engine supports WASM and WASI (WebAssembly System Interface) jobs, making it highly adaptable for various use cases. Below are the parameters for configuring the WASM Engine.",source:"@site/docs/references/other-specifications/engines/wasm.md",sourceDirName:"references/other-specifications/engines",slug:"/references/other-specifications/engines/wasm",permalink:"/references/other-specifications/engines/wasm",draft:!1,unlisted:!1,editUrl:"https://github.com/bacalhau-project/docs.bacalhau.org/blob/main/docs/references/other-specifications/engines/wasm.md",tags:[],version:"current",lastUpdatedAt:1702302289,formattedLastUpdatedAt:"Dec 11, 2023",frontMatter:{sidebar_label:"Wasm"},sidebar:"documentationSidebar",previous:{title:"Docker",permalink:"/references/other-specifications/engines/docker"},next:{title:"Publishers",permalink:"/category/publishers"}},c={},l=[{value:"<code>WASM</code> Engine Parameters",id:"wasm-engine-parameters",level:2},{value:"Example",id:"example",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"webassembly-wasm-engine-specification",children:"WebAssembly (WASM) Engine Specification"}),"\n",(0,t.jsx)(n.p,{children:"The WASM Engine in Bacalhau allows tasks to be executed in a WebAssembly environment, offering compatibility and speed. This engine supports WASM and WASI (WebAssembly System Interface) jobs, making it highly adaptable for various use cases. Below are the parameters for configuring the WASM Engine."}),"\n",(0,t.jsxs)(n.h2,{id:"wasm-engine-parameters",children:[(0,t.jsx)(n.code,{children:"WASM"})," Engine Parameters"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"EntryModule"})," ",(0,t.jsx)(n.code,{children:"("}),(0,t.jsx)(n.a,{href:"/references/job-specification/input-source",children:(0,t.jsx)(n.code,{children:"InputSource"})}),(0,t.jsx)(n.code,{children:" : required)"}),": Specifies the WASM module that contains the start function or the main execution code of the task. The InputSource should point to the location of the WASM binary."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Entrypoint"})," ",(0,t.jsx)(n.code,{children:"(string: <optional>)"}),": The name of the function within the EntryModule to execute. For WASI jobs, this should typically be ",(0,t.jsx)(n.code,{children:"_start"}),". The entrypoint function should have zero parameters and zero results."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Parameters"})," ",(0,t.jsx)(n.code,{children:"(string[]: <optional>)"}),": An array of strings containing arguments that will be supplied to the program as ARGV. This allows parameterized execution of the WASM task."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"EnvironmentVariables"})," ",(0,t.jsx)(n.code,{children:"(map[string]string: <optional>)"}),": A mapping of environment variable keys to their values, made available within the executing WASM environment."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"ImportModules"})," ",(0,t.jsx)(n.code,{children:"("}),(0,t.jsx)(n.a,{href:"/references/job-specification/input-source",children:(0,t.jsx)(n.code,{children:"InputSource"})}),(0,t.jsx)(n.code,{children:"[] : optional)"}),": An array of InputSources pointing to additional WASM modules. The exports from these modules will be available as imports to the EntryModule, enabling modular and reusable WASM code."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.p,{children:"Here\u2019s a sample configuration of the WASM Engine within a task, expressed in YAML:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'Engine:\nType: "WASM"\nParams:\n  EntryModule:\n    Source:\n      Type: "s3"\n      Params:\n        Bucket: "my-bucket"\n        Key: "entry.wasm"\n  Entrypoint: "_start"\n  Parameters:\n    - "--option"\n    - "value"\n  EnvironmentVariables:\n    VAR1: "value1"\n    VAR2: "value2"\n  ImportModules:\n    - Source:\n        Type: "localDirectory"\n        Params:\n          Path: "/local/path/to/module.wasm"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, the task is configured to run in a WASM environment. The EntryModule is fetched from an S3 bucket, the entrypoint is ",(0,t.jsx)(n.code,{children:"_start"}),", and parameters and environment variables are passed into the WASM environment. Additionally, an ImportModule is loaded from a local directory, making its exports available to the EntryModule."]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>o,a:()=>a});var t=s(7294);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);