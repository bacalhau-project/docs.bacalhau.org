"use strict";(self.webpackChunkbacalhau_docs=self.webpackChunkbacalhau_docs||[]).push([[3710],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>b});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=o.createContext({}),s=function(e){var t=o.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=s(e.components);return o.createElement(u.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,u=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=s(n),c=i,b=p["".concat(u,".").concat(c)]||p[c]||d[c]||a;return n?o.createElement(b,r(r({ref:t},m),{},{components:n})):o.createElement(b,r({ref:t},m))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=c;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[p]="string"==typeof e?e:i,r[1]=l;for(var s=2;s<a;s++)r[s]=n[s];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4495:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var o=n(7462),i=(n(7294),n(3905));const a={sidebar_label:"Timeouts",sidebar_position:155},r="Job execution timeouts",l={unversionedId:"running-node/timeouts",id:"running-node/timeouts",title:"Job execution timeouts",description:"Bacalhau can limit the total time a job spends executing. A job that spends too",source:"@site/docs/running-node/timeouts.md",sourceDirName:"running-node",slug:"/running-node/timeouts",permalink:"/running-node/timeouts",draft:!1,editUrl:"https://github.com/bacalhau-project/docs.bacalhau.org/blob/main/docs/running-node/timeouts.md",tags:[],version:"current",lastUpdatedAt:1696004600,formattedLastUpdatedAt:"Sep 29, 2023",sidebarPosition:155,frontMatter:{sidebar_label:"Timeouts",sidebar_position:155},sidebar:"documentationSidebar",previous:{title:"Resource Limits",permalink:"/running-node/resource-limits"},next:{title:"Test Network Locally",permalink:"/running-node/test-network"}},u={},s=[{value:"Configuring execution time limits for a job",id:"configuring-execution-time-limits-for-a-job",level:2},{value:"Configuring execution time limits for a node",id:"configuring-execution-time-limits-for-a-node",level:2}],m={toc:s},p="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(p,(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"job-execution-timeouts"},"Job execution timeouts"),(0,i.kt)("p",null,"Bacalhau can limit the total time a job spends executing. A job that spends too\nlong executing will be cancelled and no results will be published."),(0,i.kt)("p",null,"By default, a Bacalhau node does not enforce any limit on job execution time.\nBoth node operators and job submitters can supply a maximum execution time\nlimit. If a job submitter asks for a longer execution time than permitted by a\nnode operator, their job will be rejected."),(0,i.kt)("p",null,"Applying job timeouts allows node operators to more fairly distribute the work\nsubmitted to their nodes. It also protects users from transient errors that\nresults in their jobs waiting indefinitely."),(0,i.kt)("h2",{id:"configuring-execution-time-limits-for-a-job"},"Configuring execution time limits for a job"),(0,i.kt)("p",null,"Job submitters can pass the ",(0,i.kt)("inlineCode",{parentName:"p"},"--timeout")," flag to any Bacalhau job submission CLI\nto set a maximum job execution time. The supplied value should be a whole number\nof seconds with no unit."),(0,i.kt)("p",null,"The timeout can also be added to an existing job spec by adding the ",(0,i.kt)("inlineCode",{parentName:"p"},"Timeout"),"\nproperty to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Spec"),"."),(0,i.kt)("h2",{id:"configuring-execution-time-limits-for-a-node"},"Configuring execution time limits for a node"),(0,i.kt)("p",null,"Node operators can pass the ",(0,i.kt)("inlineCode",{parentName:"p"},"--max-timeout")," flag to ",(0,i.kt)("inlineCode",{parentName:"p"},"bacalhau serve")," to\nconfigure the maximum job time limit. The supplied value should be a numeric\nvalue followed by a time unit (one of ",(0,i.kt)("inlineCode",{parentName:"p"},"s")," for seconds, ",(0,i.kt)("inlineCode",{parentName:"p"},"m")," for minutes or ",(0,i.kt)("inlineCode",{parentName:"p"},"h"),"\nfor hours)."),(0,i.kt)("p",null,"Node operators can also use configuration properties to configure execution\nlimits."),(0,i.kt)("p",null,"Compute nodes will use the properties:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Config property"),(0,i.kt)("th",{parentName:"tr",align:null},"Meaning"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Node.Compute.JobTimeouts.MinJobExecutionTimeout")),(0,i.kt)("td",{parentName:"tr",align:null},"The minimum acceptable value for a job timeout. A job will only be accepted if it is submitted with a timeout of longer than this value.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Node.Compute.JobTimeouts.MaxJobExecutionTimeout")),(0,i.kt)("td",{parentName:"tr",align:null},"The maximum acceptable value for a job timeout. A job will only be accepted if it is submitted with a timeout of shorter than this value.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Node.Compute.JobTimeouts.DefaultJobExecutionTimeout")),(0,i.kt)("td",{parentName:"tr",align:null},"The job timeout that will be applied to jobs that are submitted without a timeout value.")))),(0,i.kt)("p",null,"Requester nodes will use the properties:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Config property"),(0,i.kt)("th",{parentName:"tr",align:null},"Meaning"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Node.Requester.Timeouts.MinJobExecutionTimeout")),(0,i.kt)("td",{parentName:"tr",align:null},"If a job is submitted with a timeout less than this value, the default job execution timeout will be used instead.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Node.Requester.Timeouts.DefaultJobExecutionTimeout")),(0,i.kt)("td",{parentName:"tr",align:null},"The timeout to use in the job if a timeout is missing or too small.")))))}d.isMDXComponent=!0}}]);