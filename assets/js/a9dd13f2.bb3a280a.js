"use strict";(self.webpackChunkbacalhau_docs=self.webpackChunkbacalhau_docs||[]).push([[2283],{4757:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=i(5893),o=i(1151);const r={sidebar_label:"Nodes"},t="Nodes API Documentation",a={id:"references/api/nodes",title:"Nodes API Documentation",description:"Nodes API provides a way to query information about the nodes in the cluster.",source:"@site/docs/references/api/nodes.md",sourceDirName:"references/api",slug:"/references/api/nodes",permalink:"/references/api/nodes",draft:!1,unlisted:!1,editUrl:"https://github.com/bacalhau-project/docs.bacalhau.org/blob/main/docs/references/api/nodes.md",tags:[],version:"current",lastUpdatedAt:1701669642,formattedLastUpdatedAt:"Dec 4, 2023",frontMatter:{sidebar_label:"Nodes"},sidebar:"documentationSidebar",previous:{title:"Jobs",permalink:"/references/api/jobs"},next:{title:"Commands CLI (Experimental)",permalink:"/references/cli/"}},d={},l=[{value:"Describe Node",id:"describe-node",level:2},{value:"List Nodes",id:"list-nodes",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"nodes-api-documentation",children:"Nodes API Documentation"}),"\n",(0,s.jsx)(e.p,{children:"Nodes API provides a way to query information about the nodes in the cluster."}),"\n",(0,s.jsx)(e.h2,{id:"describe-node",children:"Describe Node"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Endpoint:"})," ",(0,s.jsx)(e.code,{children:"GET /api/v1/orchestrator/nodes/:nodeID"})]}),"\n",(0,s.jsx)(e.p,{children:"Retrieve information about a specific node."}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Parameters"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:":nodeID"}),": Identifier of the node to describe. (e.g. ",(0,s.jsx)(e.code,{children:"QmUDAXvv31WPZ8U9CzuRTMn9iFGiopGE7rHiah1X8a6PkT"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Response"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Node"}),": Detailed information about the requested node."]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'curl 127.0.0.1:1234/api/v1/orchestrator/nodes/QmUDAXvv31WPZ8U9CzuRTMn9iFGiopGE7rHiah1X8a6PkT\n{\n  "Node": {\n    "PeerInfo": {\n      "ID": "QmUDAXvv31WPZ8U9CzuRTMn9iFGiopGE7rHiah1X8a6PkT",\n      "Addrs": [\n        "/ip4/34.34.247.247/tcp/1235"\n      ]\n    },\n    "NodeType": "Compute",\n    "Labels": {\n      "Architecture": "amd64",\n      "Operating-System": "linux",\n      "git-lfs": "True",\n      "owner": "bacalhau"\n    },\n    "ComputeNodeInfo": {\n      "ExecutionEngines": [\n        "docker",\n        "wasm"\n      ],\n      "Publishers": [\n        "s3",\n        "noop",\n        "ipfs"\n      ],\n      "StorageSources": [\n        "urldownload",\n        "inline",\n        "repoclone",\n        "repoclonelfs",\n        "s3",\n        "ipfs"\n      ],\n      "MaxCapacity": {\n        "CPU": 3.2,\n        "Memory": 12561049190,\n        "Disk": 582010404864,\n        "GPU": 1\n      },\n      "AvailableCapacity": {\n        "CPU": 3.2,\n        "Memory": 12561049190,\n        "Disk": 582010404864,\n        "GPU": 1\n      },\n      "MaxJobRequirements": {\n        "CPU": 3.2,\n        "Memory": 12561049190,\n        "Disk": 582010404864,\n        "GPU": 1\n      },\n      "RunningExecutions": 0,\n      "EnqueuedExecutions": 0\n    },\n    "BacalhauVersion": {\n      "Major": "1",\n      "Minor": "1",\n      "GitVersion": "v1.1.0",\n      "GitCommit": "970e1a0f23c7eb739a097aa8212f7964434bcd97",\n      "BuildDate": "2023-09-25T07:59:00Z",\n      "GOOS": "linux",\n      "GOARCH": "amd64"\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"list-nodes",children:"List Nodes"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Endpoint:"})," ",(0,s.jsx)(e.code,{children:"GET /api/v1/orchestrator/nodes"})]}),"\n",(0,s.jsx)(e.p,{children:"Retrieve a list of nodes."}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Parameters"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"labels"}),": Use label-based criteria to filter nodes. See ",(0,s.jsx)(e.a,{href:"../api#label-filtering",children:"Label Filtering"})," for usage details."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"limit"}),": Set the maximum number of jobs to return. Default is set to 10."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"next_token"}),": Utilize this parameter for pagination continuation."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"order_by"}),": Determine the ordering of jobs. Choose between ",(0,s.jsx)(e.code,{children:"id"}),", ",(0,s.jsx)(e.code,{children:"type"}),", ",(0,s.jsx)(e.code,{children:"available_cpu"}),", ",(0,s.jsx)(e.code,{children:"available_memory"}),", ",(0,s.jsx)(e.code,{children:"available_disk"})," or ",(0,s.jsx)(e.code,{children:"available_gpu"}),". (default is ",(0,s.jsx)(e.code,{children:"id"}),")."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"reverse"}),": Opt to reverse the default order of displayed jobs."]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Response"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Nodes"}),": List of matching nodes."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"NextToken"})," ",(0,s.jsx)(e.code,{children:"(string)"}),": Pagination token."]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(e.p,{children:"Find two linux nodes with most available Memory"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'curl --get  "127.0.0.1:1234/api/v1/orchestrator/nodes?limit=2&order_by=available_memory" --data-urlencode \'labels=Operating-System=linux\'\n{\n  "NextToken": "",\n  "Nodes": [\n    {\n      "PeerInfo": {\n        "ID": "QmcC3xifiiCuGGQ9rpvefUoary9tY65x2HaNxSdeMTvM9U",\n        "Addrs": [\n          "/ip4/212.248.248.248/tcp/1235"\n        ]\n      },\n      "NodeType": "Compute",\n      "Labels": {\n        "Architecture": "amd64",\n        "Operating-System": "linux",\n        "env": "prod",\n        "git-lfs": "False",\n        "name": "saturnia_len20"\n      },\n      "ComputeNodeInfo": {\n        "ExecutionEngines": [\n          "wasm",\n          "docker"\n        ],\n        "Publishers": [\n          "noop",\n          "ipfs"\n        ],\n        "StorageSources": [\n          "urldownload",\n          "inline",\n          "ipfs"\n        ],\n        "MaxCapacity": {\n          "CPU": 102,\n          "Memory": 858993459200,\n          "Disk": 562967789568,\n          "GPU": 2\n        },\n        "AvailableCapacity": {\n          "CPU": 102,\n          "Memory": 858993459200,\n          "Disk": 562967789568,\n          "GPU": 2\n        },\n        "MaxJobRequirements": {\n          "CPU": 96,\n          "Memory": 858993459200,\n          "Disk": 562967789568,\n          "GPU": 2\n        },\n        "RunningExecutions": 0,\n        "EnqueuedExecutions": 0\n      },\n      "BacalhauVersion": {\n        "Major": "1",\n        "Minor": "1",\n        "GitVersion": "v1.1.0",\n        "GitCommit": "970e1a0f23c7eb739a097aa8212f7964434bcd97",\n        "BuildDate": "2023-09-25T07:59:00Z",\n        "GOOS": "linux",\n        "GOARCH": "amd64"\n      }\n    },\n    {\n      "PeerInfo": {\n        "ID": "QmXaXu9N5GNetatsvwnTfQqNtSeKAD6uCmarbh3LMRYAcF",\n        "Addrs": [\n          "/ip4/35.245.245.245/tcp/1235"\n        ]\n      },\n      "NodeType": "Compute",\n      "Labels": {\n        "Architecture": "amd64",\n        "Operating-System": "linux",\n        "git-lfs": "True",\n        "owner": "bacalhau"\n      },\n      "ComputeNodeInfo": {\n        "ExecutionEngines": [\n          "docker",\n          "wasm"\n        ],\n        "Publishers": [\n          "noop",\n          "ipfs",\n          "s3"\n        ],\n        "StorageSources": [\n          "s3",\n          "ipfs",\n          "urldownload",\n          "inline",\n          "repoclone",\n          "repoclonelfs"\n        ],\n        "MaxCapacity": {\n          "CPU": 12.8,\n          "Memory": 53931124326,\n          "Disk": 718749414195,\n          "GPU": 0\n        },\n        "AvailableCapacity": {\n          "CPU": 12.8,\n          "Memory": 53931124326,\n          "Disk": 718749414195,\n          "GPU": 0\n        },\n        "MaxJobRequirements": {\n          "CPU": 12.8,\n          "Memory": 53931124326,\n          "Disk": 718749414195,\n          "GPU": 0\n        },\n        "RunningExecutions": 0,\n        "EnqueuedExecutions": 0\n      },\n      "BacalhauVersion": {\n        "Major": "1",\n        "Minor": "1",\n        "GitVersion": "v1.1.0",\n        "GitCommit": "970e1a0f23c7eb739a097aa8212f7964434bcd97",\n        "BuildDate": "2023-09-25T07:59:00Z",\n        "GOOS": "linux",\n        "GOARCH": "amd64"\n      }\n    }\n  ]\n}\n'})})]})}function u(n={}){const{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},1151:(n,e,i)=>{i.d(e,{Z:()=>a,a:()=>t});var s=i(7294);const o={},r=s.createContext(o);function t(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:t(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);